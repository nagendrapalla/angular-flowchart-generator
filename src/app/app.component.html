<div>
  <h4 style="text-align:center">
    {{title}}!
  </h4>
  <app-diagram-editor [model]="model" (nodeSelected)="showDetails($event)" (modelChanged)="onModelChanged($event)">
  </app-diagram-editor>
  <form *ngIf="node" #form="ngForm" (ngSubmit)="onCommitDetails()">
    Node Details:
    <div><label>Key: </label>{{node.key}}</div>
    <div><label>Text: </label><input [(ngModel)]="data.text" name="text"></div>
    <div><label>Color: </label><input [(ngModel)]="data.color" name="color"></div>
    <div><label>Location: </label>{{node.location.x.toFixed(2)}}, {{node.location.y.toFixed(2)}}</div>
    <div><label># Links: </label>{{node.linksConnected.count}}</div>
    <button type="submit">Commit Details</button>
    <button (click)="onCancelChanges()">Cancel Changes</button>
  </form>
</div>

<!-- <div class="container">
  <div class="p-grid">
    <div class="p-col">
      <button pButton type="button" (click)="add()" label="Add Rule" icon="pi pi-plus"
        class="p-button-outlined"></button>

      <gojs-diagram [initDiagram]='initDiagram' [nodeDataArray]='diagramNodeData' [linkDataArray]='diagramLinkData'
        [modelData]='diagramModelData' [skipsDiagramUpdate]='skipsDiagramUpdate'
        (modelChange)='diagramModelChange($event)' [divClassName]='diagramDivClassName'>
      </gojs-diagram>

    </div>
  </div>
</div>
<p-sidebar [(visible)]="display" position="right" [style]="{width:'30em'}">
  <h3>Rule #1</h3>
  <div>

    <div class="p-field">
      <span class="p-float-label" panelStyleClass="width-full">
        <p-dropdown inputId="dropdown" [autoDisplayFirst]="false" [options]="cities" optionLabel="name"></p-dropdown>
        <label for="dropdown">Parent Rule</label>
      </span>
    </div>

    <div class="p-field">
      <span class="p-float-label">
        <input id="float-input" [ngClass]="{'width-full': true}" type="text" pInputText>
        <label for="float-input">Rule Variable</label>
      </span>
    </div>

    <div class="p-field">
      <span class="p-float-label">
        <textarea id="float-input" [ngClass]="{'width-full': true}" rows="5" cols="30" autoResize="autoResize"
          pInputTextarea></textarea>
        <label for="float-input">Description</label>
      </span>
    </div>

    <label>Input Variables</label>
    <p-table [value]="inputVariables" styleClass="p-mt-2 p-datatable-gridlines">
      <ng-template pTemplate="header">
        <tr [ngClass]="{'bg-grey': true}">
          <th style="width: 40%;">Name</th>
          <th style="width: 40%;">Source</th>
          <th style="width: 20%;">Actions</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
        <tr [pEditableRow]="product">
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input pInputText type="text" [(ngModel)]="product.name" required [ngStyle]="{'width':'100%'}">
              </ng-template>
              <ng-template pTemplate="output">
                {{product.name}}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <input pInputText type="text" [(ngModel)]="product.source" required [ngStyle]="{'width':'100%'}">
              </ng-template>
              <ng-template pTemplate="output">
                {{product.source}}
              </ng-template>
            </p-cellEditor>
          </td>
          <td>
            <button pButton pRipple type="button" pInitEditableRow icon="pi pi-pencil"
              class="p-button-rounded p-button-text p-mr-2"></button>
            <button pButton pRipple type="button" pCancelEditableRow icon="pi pi-times"
              class="p-button-rounded p-button-text p-button-danger"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <div class="p-d-flex p-mt-2">
      <button pButton pRipple type="button" icon="pi pi-plus" label="Add" class="p-button-sm p-ml-auto"></button>
    </div>

    <label>Expression</label>
    <div class="p-field p-mt-2">
      <textarea pInputTextarea id="float-input" [ngClass]="{'width-full': true}" rows="5" cols="30"
        autoResize="autoResize"></textarea>
    </div>

    <button pButton pRipple type="button" label="Build" class="p-button-success" icon="pi pi-check"
      iconPos="right"></button>

  </div>
</p-sidebar> -->